commit 2893ae9f28259b2a01eb67c1799a5a9e18126811
Author: Matt Pocock <team@aihero.dev>
Date:   Tue Nov 11 12:33:35 2025 +0000

    08.01.03 Scaffold eval

diff --git a/evals/extract-memories.eval.ts b/evals/extract-memories.eval.ts
new file mode 100644
index 0000000..6f22edf
--- /dev/null
+++ b/evals/extract-memories.eval.ts
@@ -0,0 +1,59 @@
+import { extractMemoriesInner } from "@/app/api/chat/extract-memories";
+import { MyMessage } from "@/app/api/chat/route";
+import { google } from "@ai-sdk/google";
+import { evalite } from "evalite";
+import { createUIMessageFixture } from "./create-ui-message-fixture";
+
+evalite.each([
+  {
+    name: "Gemini 2.5 Flash",
+    input: google("gemini-2.5-flash"),
+  },
+  {
+    name: "Gemini 2.5 Flash Lite",
+    input: google("gemini-2.5-flash-lite"),
+  },
+])("Extract When Memories Are Empty", {
+  data: [
+    {
+      input: createUIMessageFixture<MyMessage>(
+        "I'm a software engineer at Google."
+      ),
+    },
+  ],
+  task: async (input, model) => {
+    const { updates, deletions, additions } = await extractMemoriesInner({
+      messages: input,
+      memories: [],
+      model: model,
+    });
+    return {
+      updates,
+      deletions,
+      additions,
+    };
+  },
+  scorers: [
+    {
+      name: "Updates",
+      description: "The number of updates should be 0",
+      scorer: ({ output }) => {
+        return output.updates.length === 0 ? 1 : 0;
+      },
+    },
+    {
+      name: "Deletions",
+      description: "The number of deletions should be 0",
+      scorer: ({ output }) => {
+        return output.deletions.length === 0 ? 1 : 0;
+      },
+    },
+    {
+      name: "Additions",
+      description: "The number of additions should be 1",
+      scorer: ({ output }) => {
+        return output.additions.length === 1 ? 1 : 0;
+      },
+    },
+  ],
+});
diff --git a/package.json b/package.json
index 4a9eaaf..6d3539b 100644
--- a/package.json
+++ b/package.json
@@ -1,61 +1,62 @@
 {
   "name": "ai-personal-assistant",
   "version": "0.1.0",
   "private": true,
   "scripts": {
     "dev": "next dev --turbopack",
     "build": "next build --turbopack",
+    "dev:eval": "evalite watch",
     "start": "next start",
     "cherry-pick": "ai-hero-cli cherry-pick --branch=live-run-through",
     "reset": "ai-hero-cli reset --branch=live-run-through"
   },
   "dependencies": {
     "@ai-sdk/anthropic": "^2.0.44",
     "@ai-sdk/google": "^2.0.31",
     "@ai-sdk/react": "^2.0.93",
     "@langchain/textsplitters": "^1.0.0",
     "@radix-ui/react-avatar": "^1.1.10",
     "@radix-ui/react-collapsible": "^1.1.12",
     "@radix-ui/react-dialog": "^1.1.15",
     "@radix-ui/react-dropdown-menu": "^2.1.16",
     "@radix-ui/react-hover-card": "^1.1.15",
     "@radix-ui/react-progress": "^1.1.7",
     "@radix-ui/react-scroll-area": "^1.2.10",
     "@radix-ui/react-select": "^2.2.6",
     "@radix-ui/react-separator": "^1.1.7",
     "@radix-ui/react-slot": "^1.2.3",
     "@radix-ui/react-tooltip": "^1.2.8",
     "@radix-ui/react-use-controllable-state": "^1.2.2",
     "ai": "^5.0.93",
     "class-variance-authority": "^0.7.1",
     "clsx": "^2.1.1",
     "embla-carousel-react": "^8.6.0",
     "lucide-react": "^0.544.0",
     "nanoid": "^5.1.6",
     "next": "15.5.4",
     "next-themes": "^0.4.6",
     "okapibm25": "^1.4.1",
     "react": "19.1.0",
     "react-dom": "19.1.0",
     "react-syntax-highlighter": "^15.6.6",
     "streamdown": "^1.3.0",
     "tailwind-merge": "^3.3.1",
     "tokenlens": "^1.3.1",
     "use-stick-to-bottom": "^1.1.1",
     "vite-tsconfig-paths": "^5.1.4",
     "zod": "^4.1.11"
   },
   "devDependencies": {
     "@tailwindcss/postcss": "^4.1.14",
     "@types/node": "^20",
     "@types/react": "^19",
     "@types/react-dom": "^19",
     "@types/react-syntax-highlighter": "^15.5.13",
     "ai-hero-cli": "^0.2.6",
     "evalite": "1.0.0-beta.4",
     "tailwindcss": "^4",
     "tw-animate-css": "^1.4.0",
     "typescript": "^5",
     "vitest": "^4.0.9"
   }
 }
